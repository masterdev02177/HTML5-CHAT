tinymce.PluginManager.add("tabfocus",function(g){function d(a){9===a.keyCode&&a.preventDefault()}function h(i){function p(q){function r(n){return"BODY"===n.nodeName||"hidden"!=n.type&&"none"!=n.style.display&&"hidden"!=n.style.visibility&&r(n.parentNode)}function l(n){return n.tabIndex||"INPUT"==n.nodeName||"TEXTAREA"==n.nodeName}function o(n){return!l(n)&&"-1"!=n.getAttribute("tabindex")&&r(n)}if(k=c.select(":input:enabled,*[tabindex]:not(iframe)"),f(k,function(s,u){return s.id==g.id?(m=u,!1):void 0}),q>0){for(j=m+1;j<k.length;j++){if(o(k[j])){return k[j]}}}else{for(j=m-1;j>=0;j--){if(o(k[j])){return k[j]}}}return null}var m,k,e,j;if(9===i.keyCode&&(e=b(g.getParam("tab_focus",g.getParam("tabfocus_elements",":prev,:next"))),1==e.length&&(e[1]=e[0],e[0]=":prev"),k=i.shiftKey?":prev"==e[0]?p(-1):c.get(e[0]):":next"==e[1]?p(1):c.get(e[1]))){var a=tinymce.get(k.id||k.name);k.id&&a?a.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus(),k.focus()},10),i.preventDefault()}}var c=tinymce.DOM,f=tinymce.each,b=tinymce.explode;g.on("init",function(){g.inline&&tinymce.DOM.setAttrib(g.getBody(),"tabIndex",null)}),g.on("keyup",d),tinymce.Env.gecko?g.on("keypress keydown",h):g.on("keydown",h)});