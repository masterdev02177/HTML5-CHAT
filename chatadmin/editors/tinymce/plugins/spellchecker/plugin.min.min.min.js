!function(z,E){function k(f,c){for(var h,d=[],a=0;a<f.length;++a){if(h=F[f[a]]||j(f[a]),!h){throw"module definition dependecy not found: "+f[a]}d.push(h)}c.apply(null,d)}function b(d,c,a){if("string"!=typeof d){throw"invalid module definition, module id must be defined and be a string"}if(c===E){throw"invalid module definition, dependencies must be specified"}if(a===E){throw"invalid module definition, definition function must be specified"}k(c,function(){F[d]=a.apply(null,arguments)})}function w(a){return!!F[a]}function j(c){for(var e=z,d=c.split(/[.\/]/),a=0;a<d.length;++a){if(!e[d[a]]){return}e=e[d[a]]}return e}function C(m){for(var f=0;f<m.length;f++){for(var e=z,h=m[f],d=h.split(/[.\/]/),c=0;c<d.length-1;++c){e[d[c]]===E&&(e[d[c]]={}),e=e[d[c]]}e[d[d.length-1]]=F[h]}}var F={},v="tinymce/spellcheckerplugin/DomTextMatcher",B="tinymce/spellcheckerplugin/Plugin",A="tinymce/PluginManager",D="tinymce/util/Tools",y="tinymce/ui/Menu",g="tinymce/dom/DOMUtils",x="tinymce/util/JSONRequest",q="tinymce/util/URI";b(v,[],function(){return function(U,I,N){function K(c){if(!c[0]){throw"findAndReplaceDOMText cannot handle zero-length matches"}var a=c.index;return[a,a+c[0].length,[c[0]]]}function Q(c){var a;if(3===c.nodeType){return c.data}if(S[c.nodeName]){return""}if(a="",(O[c.nodeName]||G[c.nodeName])&&(a+="\n"),c=c.firstChild){do{a+=Q(c)}while(c=c.nextSibling)}return a}function M(Z,ae,m){var f,Y,h,ac,af=[],p=0,ab=Z,aa=ae.shift(),ad=0;Z:for(;;){if((O[ab.nodeName]||G[ab.nodeName])&&p++,3===ab.nodeType&&(!Y&&ab.length+p>=aa[1]?(Y=ab,ac=aa[1]-p):f&&af.push(ab),!f&&ab.length+p>aa[0]&&(f=ab,h=aa[0]-p),p+=ab.length),f&&Y){if(ab=m({startNode:f,startNodeIndex:h,endNode:Y,endNodeIndex:ac,innerNodes:af,match:aa[2],matchIndex:ad}),p-=Y.length-ac,f=null,Y=null,af=[],aa=ae.shift(),ad++,!aa){break}}else{if(!S[ab.nodeName]&&ab.firstChild){ab=ab.firstChild;continue}if(ab.nextSibling){ab=ab.nextSibling;continue}}for(;;){if(ab.nextSibling){ab=ab.nextSibling;break}if(ab.parentNode===Z){break Z}ab=ab.parentNode}}}function X(d){var a;if("function"!=typeof d){var f=d.nodeType?d:R.createElement(d);a=function(l,h){var i=f.cloneNode(!1);return i.setAttribute("data-mce-index",h),l&&i.appendChild(R.createTextNode(l)),i}}else{a=d}return function c(af){var Z,h,ac,Y=af.startNode,ai=af.endNode,al=af.matchIndex;if(Y===ai){var ab=Y;ac=ab.parentNode,af.startNodeIndex>0&&(Z=R.createTextNode(ab.data.substring(0,af.startNodeIndex)),ac.insertBefore(Z,ab));var ah=a(af.match[0],al);return ac.insertBefore(ah,ab),af.endNodeIndex<ab.length&&(h=R.createTextNode(ab.data.substring(af.endNodeIndex)),ac.insertBefore(h,ab)),ab.parentNode.removeChild(ab),ah}Z=R.createTextNode(Y.data.substring(0,af.startNodeIndex)),h=R.createTextNode(ai.data.substring(af.endNodeIndex));for(var ag=a(Y.data.substring(af.startNodeIndex),al),ak=[],ae=0,t=af.innerNodes.length;t>ae;++ae){var aa=af.innerNodes[ae],ad=a(aa.data,al);aa.parentNode.replaceChild(ad,aa),ak.push(ad)}var aj=a(ai.data.substring(0,af.endNodeIndex),al);return ac=Y.parentNode,ac.insertBefore(Z,Y),ac.insertBefore(ag,Y),ac.removeChild(Y),ac=ai.parentNode,ac.insertBefore(aj,ai),ac.insertBefore(h,ai),ac.removeChild(ai),aj}}function J(c){var a=[];return P(function(e,d){c(e,d)&&a.push(e)}),H=a,this}function P(c){for(var a=0,d=H.length;d>a&&c(H[a],a)!==!1;a++){}return this}function W(a){return H.length&&(L=H.length,M(I,H,X(a))),this}var V,H=[],T,L=0,R,O,S,G;if(R=I.ownerDocument,O=N.getBlockElements(),S=N.getWhiteSpaceElements(),G=N.getShortEndedElements(),T=Q(I),T&&U.global){for(;V=U.exec(T);){H.push(K(V))}}return{text:T,count:L,matches:H,each:P,filter:J,mark:W}}}),b(B,[v,A,D,y,g,x,q],function(l,f,p,h,d,m,c){f.add("spellchecker",function(M,N){function i(u){for(var s in u){return!1}return!0}function H(P,Q){var u=[],O=o[Q];p.each(O,function(s){u.push({text:s,onclick:function(){M.insertContent(s),L()}})}),u.push.apply(u,[{text:"-"},{text:"Ignore",onclick:function(){a(P,Q)}},{text:"Ignore all",onclick:function(){a(P,Q,!0)}},{text:"Finish",onclick:n}]),J=new h({items:u,context:"contextmenu",onautohide:function(s){-1!=s.target.className.indexOf("spellchecker")&&s.preventDefault()},onhide:function(){J.remove(),J=null}}),J.renderTo(document.body);var t=d.DOM.getPos(M.getContentAreaContainer()),R=M.dom.getPos(P);t.x+=R.x,t.y+=R.y,J.moveTo(t.x,t.y+P.offsetHeight)}function G(){function S(u){return M.setProgressState(!1),i(u)?(M.windowManager.alert("No misspellings found"),K=!1,void 0):(o=u,t.filter(function(T){return!!u[T[2][0]]}).mark(M.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1})),t=null,M.fire("SpellcheckStart"),void 0)}function O(T,U,u){m.sendRPC({url:new c(N).toAbsolute(I.spellchecker_rpc_url),method:T,params:{lang:I.spellchecker_language||"en",words:U},success:function(V){u(V)},error:function(V,W){V="JSON Parse error."==V?"Non JSON response:"+W.responseText:"Error: "+V,M.windowManager.alert(V),M.setProgressState(!1),t=null,K=!1}})}var t,R=[],Q={};if(K){return n(),void 0}K=!0;var s=M.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„]+',"g");t=new l(s,M.getBody(),M.schema).each(function(T){var u=T[2][0];if(!Q[u]){if(/^\d+$/.test(u)||1==u.length){return}R.push(u),Q[u]=!0}}),M.setProgressState(!0);var P=I.spellchecker_callback||O;P("spellcheck",R,S)}function L(){M.dom.select("span.mce-spellchecker-word").length||n()}function r(u){var s=u.parentNode;s.insertBefore(u.firstChild,u),u.parentNode.removeChild(u)}function a(u,t,s){s?p.each(M.dom.select("span.mce-spellchecker-word"),function(P){var O=P.innerText||P.textContent;O==t&&r(P)}):r(u),L()}function n(){var t,u,s;for(K=!1,s=M.getBody(),u=s.getElementsByTagName("span"),t=u.length;t--;){s=u[t],s.getAttribute("data-mce-index")&&r(s)}M.fire("SpellcheckEnd")}function e(R){var T,Q,O,S=-1,u,P;for(R=""+R,T=M.getBody().getElementsByTagName("span"),Q=0;Q<T.length&&(O=T[Q],"mce-spellchecker-word"!=O.className||(S=O.getAttribute("data-mce-index"),S===R&&(S=R,u||(u=O.firstChild),P=O.firstChild),S===R||!P));Q++){}var t=M.dom.createRng();return t.setStart(u,0),t.setEnd(P,P.length),M.selection.setRng(t),t}var o,K,J,I=M.settings;M.on("click",function(u){if("mce-spellchecker-word"==u.target.className){u.preventDefault();var s=e(u.target.getAttribute("data-mce-index"));H(u.target,s.toString())}}),M.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:G,selectable:!0,onPostRender:function(){var s=this;M.on("SpellcheckStart SpellcheckEnd",function(){s.active(K)})}}),M.addButton("spellchecker",{tooltip:"Spellcheck",onclick:G,onPostRender:function(){var s=this;M.on("SpellcheckStart SpellcheckEnd",function(){s.active(K)})}}),M.on("remove",function(){J&&(J.remove(),J=null)})})}),C([v,B])}(this);