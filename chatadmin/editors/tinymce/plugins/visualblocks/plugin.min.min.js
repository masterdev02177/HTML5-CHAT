tinymce.PluginManager.add("visualblocks",function(f,d){function h(){var a=this;f.on("VisualBlocks",function(){a.active(f.dom.hasClass(f.getBody(),"mce-visualblocks"))})}var c,b,g;window.NodeList&&(f.addCommand("mceVisualBlocks",function(){var e,a=f.dom;c||(c=a.uniqueId(),e=a.create("link",{id:c,rel:"stylesheet",href:d+"/css/visualblocks.css"}),f.getDoc().getElementsByTagName("head")[0].appendChild(e)),f.on("PreviewFormats AfterPreviewFormats",function(i){g&&a.toggleClass(f.getBody(),"mce-visualblocks","afterpreviewformats"==i.type)}),a.toggleClass(f.getBody(),"mce-visualblocks"),g=f.dom.hasClass(f.getBody(),"mce-visualblocks"),b&&b.active(a.hasClass(f.getBody(),"mce-visualblocks")),f.fire("VisualBlocks")}),f.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:h}),f.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:h,selectable:!0,context:"view",prependToContext:!0}),f.on("init",function(){f.settings.visualblocks_default_state&&f.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),f.on("remove",function(){f.dom.removeClass(f.getBody(),"mce-visualblocks")}))});